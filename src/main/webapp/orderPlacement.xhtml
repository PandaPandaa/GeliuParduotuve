<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
<h:head>
    <title>Pateikti užsakymą | Gėlių parduotuvė</title>
    <h:outputStylesheet library="css" name="default.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script>
    <script>
        $(function(){
            $("#navbar").load("navbar.xhtml");
        });
    </script>
    <script>
        $(function(){
            $("#footer").load("footer.xhtml");
        });
    </script>
</h:head>
<h:body class="lightGreyBackground">
    <div id="navbar"></div>
    <div class="lightGreyDiv" id="wrapper">
        <div class="thingy5">
            <h2>Krepšelyje:</h2>
            <h:dataTable value = "#{cart.orderInfos}" var = "info"
                         border="3" cellpadding="3" cellspacing="3">
                <h:column>
                    <f:facet name = "header">Pavadinimas</f:facet>
                    #{info.flowerName}
                </h:column>

                <h:column>
                    <f:facet name = "header">Vieneto kaina</f:facet>
                    #{info.flowerPrice}
                </h:column>

                <h:column>
                    <f:facet name = "header">Kiekis</f:facet>
                    #{info.flowerAmount}
                </h:column>

                <h:column>
                    <f:facet name = "header">Kaina</f:facet>
                    #{info.flowerAmount * info.flowerPrice}
                </h:column>
            </h:dataTable><br/>
            <h:dataTable value = "#{orders.orderPrice}" var="price"
                         border="3" cellpadding="3" cellspacing="3">
                <h:column>
                    <f:facet name = "header">Galutinė kaina:</f:facet>
                    #{price}
                </h:column>
            </h:dataTable><br/>
            <h:form>
                <div class="field">
                    <h:outputLabel for="varPavarde" value="Gavėjo vardas ir pavardė:"/><br/>
                    <h:inputText id="varPavarde" value="#{orderController.orderToCreate.receiverName}" required="true" requiredMessage="Prašome įvesti vardą ir pavardę" validatorMessage="Ilgis turi būti tarp 5 ir 50 symbolių">
                        <f:ajax event="change" render="varPavardeError"/>
                        <f:validateLength minimum="5" maximum="50"  />
                    </h:inputText>
                    <br/>
                    <h:message id="varPavardeError" class="error" for="varPavarde"/>
                </div>
                <h:outputLabel for="Address" value="Gavėjo adresas:"/><br/>
                <h:inputText id="Address" value="#{orderController.orderToCreate.address}" required="true" requiredMessage="Prašome įvesti adresą" validatorMessage="Ilgis turi būti tarp 10 ir 100 symbolių">
                    <f:ajax event="change" render="varPavardeError"/>
                    <f:validateLength minimum="10" maximum="100" />
                </h:inputText><br/>
                <h:message id="AddressError" class="error" for="Address"/><br/>
                Žinutė gavėjui (nebūtina):<br/>
                <h:inputText value="#{orderController.orderToCreate.message}" required="false"/><br/>
                <h:commandButton value="Apmokėti" action="#{orderController.PlaceOrder(currentUser.currentUser, cart.orderInfos)}"/>
            </h:form>
        </div>
    </div>
    <div id="footer"></div>
</h:body>
</html>