<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
<h:head>
    <title>Profilis | Gėlių parduotuvė</title>
    <h:outputStylesheet library="css" name="default.css" />
    <h:outputStylesheet library="loginCss" name="login.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script>
    <script>
        $(function(){
            $("#navbar").load("navbar.xhtml");
        });
    </script>
    <script>
        $(function(){
            $("#footer").load("footer.xhtml");
        });
    </script>
</h:head>
<h:body class="lightGreyBackground">
    <div id="navbar"></div>
    <div class="ui fluid" id="wrapper">
        <div class="lightGreyDiv">
            <div class="thingy5">
                <h2>Mano profilis:</h2>
                <h:form>
                    <div class="field">
                        <h:outputLabel for="firstName" value="Vardas"/>
                        <h:inputText id="firstName" label="Name" value="#{currentUser.currentUser.name}" required="true" >
                            <f:ajax event="change" render="firstNameError"/>
                        </h:inputText>
                        <br/>
                        <h:message id="firstNameError" class="error" for="firstName"/>
                    </div>
                    <br/>
                    <div class="field">
                        <h:outputLabel value="El. paštas"/>
                        <h:inputText id="email" label="email" value="#{currentUser.currentUser.email}" required="true">
                            <f:ajax event="change" render="emailError"/>
                        </h:inputText>
                        <br/>
                        <h:message id="emailError" class="error" for="email"/>
                    </div>
                    <br/>
                    <div class="field">
                        <h:outputLabel value="Naujas slaptažodis"/>
                        <h:inputSecret id="pass" label="pass" value="#{currentUser.currentUser.password}" required="true">
                            <f:ajax event="change" render="emailError"/>
                        </h:inputSecret>
                        <br/>
                        <h:message id="passError" class="error" for="email"/>
                    </div>
                    <br/>
                    <h:commandButton value="Keisti duomenis" action="#{users.UpdateCurrentUser()}" />
                </h:form><br/>
                <h:form rendered="#{param['error'] == 'optimistic-lock-exception'}">
                    Jūsų duomenys buvo ką tik pakeisti!<br/>
                    Ar norite juos<br/>
                    <h:commandButton value="Išsaugoti Jūsų parašytus duomenis" action="#{users.OverwriteCurrentUser()}"/>
                </h:form>
                <h:form rendered="#{param['error'] == 'optimistic-lock-exception'}">
                    ar<br/>
                    <h:commandButton value="Atnaujinti duomenis" action="#{users.ReloadCurrentUser()}"/>
                </h:form>
            </div>
        </div>
    </div>
    <div id="footer"></div>
</h:body>
</html>
